<!-- 
    实现移动图片的功能
    https://github.com/hanzichi/hanzichi.github.io/blob/9cfd35b5009c0b259f4e50abefbf3980f46ad5f3/2015/drag-and-drop/a.htm
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        span{
            width: 200px;
            height: 100px;
            display: inline-block;
            vertical-align: top;
            border: 1px black solid;
        }
    </style>
</head>
<body>
    <span id='sp0'><img src='./1.png' draggable="true" id='img1'/></span>
    <span id='sp1'></span>
    <span id='sp2'></span>
    <span id='sp3'></span>

    <script>
        let img1 = document.getElementById('img1')
        //drag元素绑定dragstart事件，只在开始拖动时触发一次
        img1.ondragstart = function(e){
            e.dataTransfer.setData('id' , e.target.id)
        }
        
        //拖动过程中持续触发
        img1.ondrag = function(){

        }

        let list = document.getElementsByTagName('span')
        for(let i=0;i<list.length;i++){
            let box = list[i]
            //给drop元素绑定dragover事件 , 默认地，无法将元素放置到其他元素中，如果需要设置允许放置，我们必须阻止对元素的默认处理方式：
            box.ondragover = function(e){
                e.preventDefault()
            }

            box.ondrop = function(e){
                e.stopPropagation()
                e.preventDefault()

                if(e.target.id === 'img1'){

                }else{
                    let node = document.getElementById(e.dataTransfer.getData('id'))
                    box.appendChild(node)
                }
            }
        }


    </script>
</body>
</html>